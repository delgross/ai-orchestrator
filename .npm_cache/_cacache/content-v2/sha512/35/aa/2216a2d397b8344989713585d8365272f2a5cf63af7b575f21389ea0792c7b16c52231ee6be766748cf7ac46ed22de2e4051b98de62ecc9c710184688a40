{"_id":"sonos-ts-mcp","_rev":"9-009f0d99ad9c53694a24fcd603e4f9c7","name":"sonos-ts-mcp","dist-tags":{"latest":"1.4.8"},"versions":{"1.4.0":{"name":"sonos-ts-mcp","version":"1.4.0","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.0","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-mcp":"dist/index.js"},"dist":{"shasum":"69e5cd04f6152b62b7e5747d2bd6bd3edafe8982","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.0.tgz","fileCount":114,"integrity":"sha512-oPo4xaM1IxmJoOKG5MtS1JVIj8fb/bpCwLCgOs57DupYI81KWXxYvHg4kAV408MiElymAusID+uSM+0mzw5DWg==","signatures":[{"sig":"MEUCIQCEfLsNUmUzJZ2nOfo5P82HutEUAIUZc1jjmxhx+FbJXgIgTPEiA/TGh/qpg+a+9Heu8J5lr3kCfYI9pkVVJR+aexg=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":462687},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"d9aa9230962ca875de485eeef557b5729579591a","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:all-phases":"tsx scripts/test-all-phases.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.0_1760462467804_0.9582429527090941","host":"s3://npm-registry-packages-npm-production"}},"1.4.1":{"name":"sonos-ts-mcp","version":"1.4.1","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.1","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"47c2351e7755977475127f24f68727bb9aac9282","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.1.tgz","fileCount":114,"integrity":"sha512-+1qWg/W1HtnIXsx39hFYoqH8LgLFfjxB00+WUbDdTjKzNerh97tcXSSZ7SL+02OcKnE0g7n7v1HDNeAilJdacA==","signatures":[{"sig":"MEQCIEoUj9vdoq0kfJqlu/X6eGaQSfr9bqzr6fHjsMay1lZIAiAmiPLpMKvxUwYoBXbWAPpFSz5Vxb2kmSIpbUGhBzfr9A==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":463415},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"0dc8fccecff19ecd199eebd2d259dca27a1e51a6","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:all-phases":"tsx scripts/test-all-phases.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.1_1760462993513_0.04111512401221051","host":"s3://npm-registry-packages-npm-production"}},"1.4.2":{"name":"sonos-ts-mcp","version":"1.4.2","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.2","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"dc04778f4c68b04140b65988fd6514966b77e9c6","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.2.tgz","fileCount":114,"integrity":"sha512-R91T79oFbnsKFdMpbqCdrAn7joC2AlZZACuk0MhZiee5/Gn0GVArfQNjzLi+81l5zxsr7/TghY/P4JyDIsgE4A==","signatures":[{"sig":"MEQCIHLNqaimqJlVpAWxYIzbWhqNIEZiyHNZ1p7VY3ujbwP5AiAJ3FrYcllY0VugphARI0N9lVUtniMKfZDbhSsDgV/Dzw==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":475786},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"321673cf278c18f6d0567a5ab6aac9e3f9887adf","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:all-phases":"tsx scripts/test-all-phases.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.2_1760630701862_0.32915328360103","host":"s3://npm-registry-packages-npm-production"}},"1.4.3":{"name":"sonos-ts-mcp","version":"1.4.3","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.3","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"112c367f7747fb2d362e3824e39db254d68953fe","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.3.tgz","fileCount":118,"integrity":"sha512-1h+TimVV2JWgN/V+iTou6bSLJAr9k8T15DKdbauTUjRrFFxWo+DJqSJIcmZN8CHpmm50ZoJGuoCn7ywVsatPUA==","signatures":[{"sig":"MEUCIQDYnUeDz8smaOW9yRDyonmeF+6rG6B27etUlS8u8gcURgIgOFk/NXPlelizzD1tE568SfpXdk7Axhzsq15Mgpy7b5A=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":498534},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"3e67bfe7594e500a2b01038d07f510814cbbb469","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","doPublish":"npm run build && npm version patch && npm publish","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:all-phases":"tsx scripts/test-all-phases.ts","test:resolution":"tsx scripts/test-device-resolution.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.3_1761487217846_0.49907521421420076","host":"s3://npm-registry-packages-npm-production"}},"1.4.4":{"name":"sonos-ts-mcp","version":"1.4.4","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.4","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"121f75f7b3c034d9094ef40bd15060a89f220806","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.4.tgz","fileCount":170,"integrity":"sha512-N6JoDjljLYGOfW22Kcmh0e0gJBAW4kPCZj61Q8NQAW4oexYeaxAyTJa0/K/O/hIN0+9lDu5dmACjbMjH4uM4uQ==","signatures":[{"sig":"MEUCIQDp6GPr1gl14wYm2fM2hfsf8JNR0W9Zwh0gPEmYulC61gIgFVuYYuGZkh4xSaKmqGL5oNOTKSW49uIkEcnXEt+X+co=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":497738},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"52336bea9e440e7d3ec9edd6aa53964451ad0b2e","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","doPublish":"npm run build && npm version patch && npm publish","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:mcp-stdio":"tsx scripts/test-mcp-stdio.ts","test:all-phases":"tsx scripts/test-all-phases.ts","test:resolution":"tsx scripts/test-device-resolution.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.4_1763286557607_0.6305094812206535","host":"s3://npm-registry-packages-npm-production"}},"1.4.5":{"name":"sonos-ts-mcp","version":"1.4.5","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.5","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"e0881e2f93e5b6514d6159372bac6fd52b08ae7f","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.5.tgz","fileCount":170,"integrity":"sha512-duglEyjQGO2hZETvDHKmRLh/hIy7TzJLwAhS4IDhWic1rJ31A8+OvBGJ7U833DxbrPFySHEwUhEEY5IEvZUzsA==","signatures":[{"sig":"MEUCIHjSwvfbxGJ4IQmBFnRuHh4HDSiFG688CO5FnL+2YcPRAiEA+qoz6xxTi6TqFFfpXmd4vs3CWymROqxOHhU2WXXSnSk=","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":497738},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"50bd6ca874e202541447d664a0a0c556c24b1d42","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","doPublish":"npm run build && npm version patch && npm publish","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:mcp-stdio":"tsx scripts/test-mcp-stdio.ts","test:all-phases":"tsx scripts/test-all-phases.ts","test:resolution":"tsx scripts/test-device-resolution.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.5_1763286876508_0.17081943158619084","host":"s3://npm-registry-packages-npm-production"}},"1.4.6":{"name":"sonos-ts-mcp","version":"1.4.6","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.6","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"3385d3c258a92a7393657dc3470f9d2258208b39","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.6.tgz","fileCount":170,"integrity":"sha512-tG9JR34H2U+IPu1oHLBc1HB4HI001A1xQ+DagEfhoBp8k3wUZ5IR1k1DvWPmDU8Hy3S+0q3Dx8scE6r/E/FmPg==","signatures":[{"sig":"MEYCIQDql3gfXoXVW0brqw/j6orGzPwHeIRvx/iKBbUzo0eE/wIhAK4JRV8QXV9a1fnU3YM5n50tfBKE8nFAPcUGE//qOQdq","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":497738},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"20291f4e00bdbad5066e4defc4961e7ef0da0bf6","scripts":{"dev":"tsx src/index.ts","lint":"eslint src tests","test":"vitest run","build":"tsc","format":"prettier --write src tests","prepare":"npm run build","doPublish":"npm run build && npm version patch && npm publish","typecheck":"tsc --noEmit","test:watch":"vitest","test:events":"tsx scripts/test-events.ts","test:phase1":"tsx scripts/test-phase1.ts","test:phase2":"tsx scripts/test-phase2.ts","test:phase3":"tsx scripts/test-phase3.ts","test:phase4":"tsx scripts/test-phase4.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:mcp-stdio":"tsx scripts/test-mcp-stdio.ts","test:all-phases":"tsx scripts/test-all-phases.ts","test:resolution":"tsx scripts/test-device-resolution.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"11.5.2","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"20.19.4","dependencies":{"xml2js":"^0.6.2","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.6_1763290280114_0.1793245629863056","host":"s3://npm-registry-packages-npm-production"}},"1.4.7":{"name":"sonos-ts-mcp","version":"1.4.7","keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","_id":"sonos-ts-mcp@1.4.7","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"bin":{"sonos-ts-mcp":"dist/index.js"},"dist":{"shasum":"0c651ef589c8bdde38628308df67b61bffac7e08","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.7.tgz","fileCount":219,"integrity":"sha512-71ruLVYEVJWNIt2j1Ybyyif5Va3wD7Bo2w68Qm8f+mmVW3S7Qfq/91G7STawuzXmnd166E2Qw2aXtnkXTtTOig==","signatures":[{"sig":"MEQCIEP/NJKkn+LIaYLc5jHPrMN8P4m8R7jo0BkWWw3ftVcsAiBaZZD9HqPpm4lmNScKVrUAKk8TGackwMbupBP+XAU/JQ==","keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U"}],"unpackedSize":558959},"main":"dist/index.js","type":"module","types":"./dist/index.d.ts","engines":{"node":">=20.0.0"},"gitHead":"2dac198cb1a6ba8e56152683c7c91c91c42b0a8e","scripts":{"lint":"eslint src tests","test":"vitest run","agent":"tsx src/cli/sonos-agent-cli.ts","build":"tsc","format":"prettier --write src tests","doPublish":"npm run build && npm version patch && npm publish","typecheck":"tsc --noEmit","test:watch":"vitest","agent:build":"npm run build && tsx src/cli/sonos-agent-cli.ts","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts"},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"_npmVersion":"10.9.4","description":"Model Context Protocol server for Sonos audio devices","directories":{},"_nodeVersion":"22.21.1","dependencies":{"ai":"^5.0.100","zod":"^3.25.76","dotenv":"^17.2.3","xml2js":"^0.6.2","@mastra/core":"^0.24.5","@ai-sdk/google":"^2.0.42","@ai-sdk/openai":"^2.0.71","@modelcontextprotocol/sdk":"^1.0.0"},"_hasShrinkwrap":false,"devDependencies":{"tsx":"^4.19.0","eslint":"^9.0.0","vitest":"^2.1.0","prettier":"^3.3.0","typescript":"^5.6.0","@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/parser":"^8.0.0","@typescript-eslint/eslint-plugin":"^8.0.0"},"_npmOperationalInternal":{"tmp":"tmp/sonos-ts-mcp_1.4.7_1763931158975_0.502077356727048","host":"s3://npm-registry-packages-npm-production"}},"1.4.8":{"name":"sonos-ts-mcp","version":"1.4.8","description":"Model Context Protocol server for Sonos audio devices","type":"module","main":"dist/index.js","bin":{"sonos-ts-mcp":"dist/index.js"},"scripts":{"build":"tsc","agent":"tsx src/cli/sonos-agent-cli.ts","agent:build":"npm run build && tsx src/cli/sonos-agent-cli.ts","test":"vitest run","test:watch":"vitest","test:coverage":"vitest run --coverage","test:discovery":"tsx scripts/test-discovery.ts","test:radio":"tsx scripts/test-favorite-radio-stations.ts","test:music-services":"tsx scripts/test-music-services.ts","test:agent-tool":"tsx scripts/test-agent-tool.ts","lint":"eslint src tests","format":"prettier --write src tests","typecheck":"tsc --noEmit","doPublish":"npm run build && npm version patch && npm publish"},"keywords":["sonos","upnp","mcp","model-context-protocol"],"author":"","license":"MIT","engines":{"node":">=20.0.0"},"dependencies":{"@ai-sdk/google":"^2.0.42","@ai-sdk/openai":"^2.0.71","@mastra/core":"^0.24.5","@modelcontextprotocol/sdk":"^1.0.0","ai":"^5.0.100","dotenv":"^17.2.3","xml2js":"^0.6.2","zod":"^3.25.76"},"devDependencies":{"@types/node":"^22.0.0","@types/xml2js":"^0.4.14","@typescript-eslint/eslint-plugin":"^8.0.0","@typescript-eslint/parser":"^8.0.0","eslint":"^9.0.0","prettier":"^3.3.0","tsx":"^4.19.0","typescript":"^5.6.0","vitest":"^2.1.0"},"_id":"sonos-ts-mcp@1.4.8","gitHead":"c447aab05b247dd3c90f11481be96144c133b9e4","types":"./dist/index.d.ts","_nodeVersion":"22.21.1","_npmVersion":"10.9.4","dist":{"integrity":"sha512-/My1K1HeogrDmgdJz2ka5qRe9MnQcEiI17N4Qo+rndOF4Vysss5mKZdoMMTNBIkRu8Lid8FkHeiW21vlzQ35vw==","shasum":"1d40369bdca2f1652069f2ee0f397cd8b341c88e","tarball":"https://registry.npmjs.org/sonos-ts-mcp/-/sonos-ts-mcp-1.4.8.tgz","fileCount":274,"unpackedSize":685819,"signatures":[{"keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U","sig":"MEYCIQCkk9wXsfJ7cnhwlfyh8btK2ifqNEj9iyFyyfaPJPeMvAIhAJg5mVAU+ZvzqCPOQjy4T8JHIuw7KEpC9WM4cSfFFxLv"}]},"_npmUser":{"name":"tommertom","email":"gruintjestom@gmail.com"},"directories":{},"maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages-npm-production","tmp":"tmp/sonos-ts-mcp_1.4.8_1764277846531_0.11053982794835115"},"_hasShrinkwrap":false}},"time":{"created":"2025-10-14T17:21:07.803Z","modified":"2025-11-27T21:10:47.002Z","1.4.0":"2025-10-14T17:21:08.018Z","1.4.1":"2025-10-14T17:29:53.726Z","1.4.2":"2025-10-16T16:05:02.106Z","1.4.3":"2025-10-26T14:00:18.054Z","1.4.4":"2025-11-16T09:49:17.817Z","1.4.5":"2025-11-16T09:54:36.727Z","1.4.6":"2025-11-16T10:51:20.319Z","1.4.7":"2025-11-23T20:52:39.171Z","1.4.8":"2025-11-27T21:10:46.786Z"},"license":"MIT","keywords":["sonos","upnp","mcp","model-context-protocol"],"description":"Model Context Protocol server for Sonos audio devices","maintainers":[{"name":"tommertom","email":"gruintjestom@gmail.com"}],"readme":"# Sonos TypeScript MCP Server\n\nYour comprehensive Sonos control companion powered by the Model Context Protocol (MCP). This intelligent server provides seamless access to Sonos audio devices over your local network using UPnP/SOAP protocols. Whether you're controlling playback, managing zones, browsing your music library, or setting up alarms, this MCP server delivers complete device control directly to your AI assistant, enabling smart home automation and better audio experiences.\n\n**Specifically designed for coding agents and AI-driven home audio automation workflows.** This server enables AI assistants to build intelligent multi-room audio experiences, music library management, zone grouping, queue management, and integration with smart home platforms.\n\nData is sourced from real-time UPnP/SOAP communication with Sonos devices to ensure accuracy and completeness.\n\n> **üìä Feature Status**: Phase 4 complete! Implements real-time event subscriptions with UPnP GENA protocol for playback, volume, queue, and topology changes. See [Phase 4 completion](./docs/PHASE-4-COMPLETE.md) for details.\n\n## üìö Documentation\n\n- **[Comprehensive Tool Descriptions](./docs/TOOL_DESCRIPTIONS.md)** - Detailed guide for coding agents with use cases, workflows, and best practices for all 50+ tools\n- **[API Reference](./docs/)** - Technical API documentation\n- **[Example Scripts](./scripts/)** - Sample automation scripts and use cases\n\n## Getting Started\n\nThe Sonos TypeScript MCP Server can work with any MCP client that supports standard I/O (stdio) as the transport medium. Here are specific instructions for some popular tools:\n\n### Basic Configuration\n\n#### Claude Desktop\n\nTo configure Claude Desktop to use the Sonos MCP server, edit the `claude_desktop_config.json` file. You can open or create this file from the Claude > Settings menu. Select the Developer tab, then click Edit Config.\n\n```json\n{\n  \"mcpServers\": {\n    \"sonos-ts-mcp\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sonos-ts-mcp@latest\"]\n    }\n  }\n}\n```\n\n#### Cline\n\nTo configure Cline to use the Sonos MCP server, edit the `cline_mcp_settings.json` file. You can open or create this file by clicking the MCP Servers icon at the top of the Cline pane, then clicking the Configure MCP Servers button.\n\n```json\n{\n  \"mcpServers\": {\n    \"sonos-ts-mcp\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sonos-ts-mcp@latest\"],\n      \"disabled\": false\n    }\n  }\n}\n```\n\n#### Cursor\n\nTo configure Cursor to use the Sonos MCP server, edit either the file `.cursor/mcp.json` (to configure only a specific project) or the file `~/.cursor/mcp.json` (to make the MCP server available in all projects):\n\n```json\n{\n  \"mcpServers\": {\n    \"sonos-ts-mcp\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sonos-ts-mcp@latest\"]\n    }\n  }\n}\n```\n\n#### Visual Studio Code Copilot\n\nTo configure a single project, edit the `.vscode/mcp.json` file in your workspace:\n\n```json\n{\n  \"servers\": {\n    \"sonos-ts-mcp\": {\n      \"type\": \"stdio\",\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sonos-ts-mcp@latest\"]\n    }\n  }\n}\n```\n\nTo make the server available in every project you open, edit your user settings:\n\n```json\n{\n  \"mcp\": {\n    \"servers\": {\n      \"sonos-ts-mcp\": {\n        \"type\": \"stdio\",\n        \"command\": \"npx\",\n        \"args\": [\"-y\", \"sonos-ts-mcp@latest\"]\n      }\n    }\n  }\n}\n```\n\n#### Windsurf Editor\n\nTo configure Windsurf Editor, edit the file `~/.codeium/windsurf/mcp_config.json`:\n\n```json\n{\n  \"mcpServers\": {\n    \"sonos-ts-mcp\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sonos-ts-mcp@latest\"]\n    }\n  }\n}\n```\n\n## Testing with an Agent\n\nYou can quickly test the MCP server using the built-in CLI agent, which uses natural language to interact with your Sonos system:\n\n```bash\n# Run directly with npx (no installation required)\nnpx sonos-agent-cli \"Play jazz in the living room\"\n\n# Use a specific AI model\nnpx sonos-agent-cli \"What's playing in the kitchen?\" --model gpt-4o\n\n# Use Gemini models\nnpx sonos-agent-cli \"Set volume to 50 in all rooms\" --model gemini-3-pro-preview\n```\n\n**Required Environment Variables:**\n\n- `OPENAI_API_KEY`: For OpenAI models (gpt-4o, gpt-4o-mini, etc.)\n- `GOOGLE_GENERATIVE_AI_API_KEY`: For Gemini models\n- `SONOS_AGENT_MODEL`: Set a default model (optional)\n\n**Build Behavior:**\n\nThe CLI automatically builds the MCP server before running to ensure the latest code is used. To skip the build (e.g., during rapid testing), use `--skip-build`:\n\n```bash\nnpx sonos-agent-cli \"Play music\" --skip-build\n```\n\nThis agent provides an easy way to verify that the MCP server is working correctly and can communicate with your Sonos devices.\n\n## Features\n\nThis MCP server provides comprehensive control of your Sonos audio system:\n\n- **AI-Powered Agent Tool**: Natural language control via the `sonos_agent` tool (requires AI API keys) ‚ú® NEW\n- **Topology Persistence**: Device topology automatically saved to disk and loaded on startup\n- **Intelligent Device Resolution**: Control devices by friendly name (e.g., \"Kitchen\") instead of UUIDs\n- **Automatic Discovery**: Discovers devices on startup and every 5 minutes\n- **Device Discovery**: Manual SSDP-based discovery of Sonos devices\n- **Playback Control**: Play, pause, stop, next, previous\n- **Volume Control**: Get and set volume levels, mute/unmute\n- **Transport Info**: Get current playback state and track information\n- **Zone Topology**: Query zone groups and speaker configurations\n- **Queue Management**: Full queue control (add, remove, reorder, save, play)\n- **DIDL-Lite Support**: Complete metadata handling for tracks, albums, and containers\n- **Playback Properties**: Shuffle, repeat, and crossfade controls\n- **Group Management**: Join and unjoin devices to create multi-room groups\n- **Music Library Browsing**: Browse artists, albums, tracks, genres, and playlists\n- **Library Search**: Fuzzy search across your music library\n- **Audio/EQ Controls**: Bass, treble, loudness, night mode, dialog enhancement\n- **Sleep Timer**: Automatic playback stop after duration\n- **Alarm Management**: Create, update, and delete alarms\n- **Snapshot/Restore**: Save and restore complete device state\n- **Party Mode**: Join all devices at once\n- **Event Subscriptions**: Real-time notifications for state changes ‚ú® NEW\n- **MCP Prompts**: Exposes AI agent instructions as discoverable prompts ‚ú® NEW\n- **Pure TypeScript**: Built from scratch without external Sonos libraries\n- **MCP Compatible**: Integrates with any MCP-compatible client\n\n### Planned Features (Phase 5+)\n\nThis project is actively expanding to match the comprehensive feature set of the Python SoCo library:\n\n-  Music service integration (Spotify, Apple Music)\n- üü¢ Advanced group management (stereo pairs, home theater)\n- üü¢ Audio analysis and diagnostics\n- üü¢ MCP event tool integration\n\nSee the [Phase 4 completion](./docs/PHASE-4-COMPLETE.md) for the latest features.\n\n## Tools Available\n\n### AI Agent Tool ‚ú® NEW\n| Tool | Description |\n|------|-------------|\n| `sonos_agent` | AI-powered natural language control. Give instructions like \"Play jazz in the living room\" and the agent autonomously handles device discovery, tool selection, and execution. Only available when `OPENAI_API_KEY` or `GOOGLE_GENERATIVE_AI_API_KEY` is configured. See [Agent Tool Documentation](./docs/agent-tool.md) for details. |\n\n### Discovery Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_discover` | Discover Sonos devices on the network using SSDP multicast |\n| `sonos_add_device` | Manually add a Sonos device by IP address (useful when SSDP discovery fails) |\n| `sonos_list_devices` | List all discovered/registered devices |\n\n### Playback Control Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_play` | Start playback |\n| `sonos_pause` | Pause playback |\n| `sonos_stop` | Stop playback |\n| `sonos_next` | Skip to next track |\n| `sonos_previous` | Skip to previous track |\n\n### Volume Control Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_set_volume` | Set volume (0-100) |\n| `sonos_get_volume` | Get current volume |\n| `sonos_set_mute` | Mute or unmute |\n\n### Queue Management Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_get_queue` | Get the current playback queue |\n| `sonos_add_to_queue` | Add a URI to the queue |\n| `sonos_remove_from_queue` | Remove a track from the queue |\n| `sonos_clear_queue` | Remove all tracks from the queue |\n| `sonos_play_from_queue` | Play from a specific queue position |\n| `sonos_save_queue` | Save the queue as a Sonos playlist |\n\n### Playback Properties Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_set_shuffle` | Enable or disable shuffle mode |\n| `sonos_set_repeat` | Set repeat mode (off, all, one) |\n| `sonos_set_crossfade` | Enable or disable crossfade |\n| `sonos_get_playback_state` | Get shuffle, repeat, crossfade, and playback state |\n\n### Group Management Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_join_group` | Join a device to another device's group |\n| `sonos_unjoin` | Remove a device from its group |\n| `sonos_party_mode` | Join all devices at once |\n\n### Music Library Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_browse_artists` | Browse all artists in the music library |\n| `sonos_browse_albums` | Browse all albums in the music library |\n| `sonos_browse_tracks` | Browse all tracks in the music library |\n| `sonos_browse_genres` | Browse all genres in the music library |\n| `sonos_browse_playlists` | Browse Sonos playlists |\n| `sonos_get_favorite_radio_stations` | Get favorite radio stations from Sonos favorites |\n| `sonos_search_library` | Search the music library |\n| `sonos_browse_item` | Browse subcategories (e.g., albums for an artist) |\n\n### Music Services Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_list_music_services` | List available music services (Sonos Radio, TuneIn, Spotify, etc.) |\n| `sonos_browse_music_service` | Browse content from a music service (categories, stations, playlists) |\n| `sonos_search_music_service` | Search for content within a music service |\n| `sonos_play_music_service_item` | Play an item from a music service (radio station, track, album) |\n| `sonos_get_music_service_item_uri` | Get the streaming URI for a music service item |\n\n### Audio/EQ Control Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_set_bass` | Set bass level (-10 to 10) |\n| `sonos_set_treble` | Set treble level (-10 to 10) |\n| `sonos_set_loudness` | Enable/disable loudness compensation |\n| `sonos_get_eq` | Get all EQ settings |\n| `sonos_set_night_mode` | Enable/disable night mode (home theater) |\n| `sonos_set_dialog_mode` | Enable/disable dialog enhancement (home theater) |\n\n### Sleep Timer Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_set_sleep_timer` | Set automatic playback stop timer |\n| `sonos_get_sleep_timer` | Get remaining timer |\n| `sonos_cancel_sleep_timer` | Cancel sleep timer |\n\n### Alarm Management Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_list_alarms` | List all alarms |\n| `sonos_create_alarm` | Create a new alarm |\n| `sonos_update_alarm` | Update an existing alarm |\n| `sonos_delete_alarm` | Delete an alarm |\n\n### State Management Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_snapshot` | Take a snapshot of device state |\n| `sonos_restore_snapshot` | Restore from snapshot |\n\n### Event Subscription Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_subscribe_events` | Subscribe to real-time device events (AVTransport, RenderingControl, Queue, ZoneGroupTopology, AlarmClock) |\n| `sonos_unsubscribe_events` | Unsubscribe from a specific subscription |\n| `sonos_unsubscribe_all` | Unsubscribe from all device subscriptions |\n| `sonos_list_subscriptions` | List active event subscriptions |\n\n### Information Tools\n| Tool | Description |\n|------|-------------|\n| `sonos_get_transport_info` | Get playback state |\n| `sonos_get_position_info` | Get current track details |\n| `sonos_get_zone_groups` | Get zone topology |\n\n## Development and Installation\n\n```bash\nnpm install\nnpm run build\n```\n\n### Test Discovery\n\nAfter installation, you can test if your Sonos devices can be discovered:\n\n```bash\nnpm run test:discovery\n```\n\nThis will perform an SSDP multicast search and display any Sonos devices found on your network.\n\n### Test Favorite Radio Stations\n\nYou can test the favorite radio stations feature:\n\n```bash\nnpm run test:radio\n```\n\nThis will query your Sonos device for saved radio stations and display them. If no stations are found, it will provide instructions on how to add some using the Sonos app.\n\n### Test Agent Tool\n\nYou can test the AI-powered agent tool (requires AI API keys):\n\n```bash\n# Set up your API key first\nexport OPENAI_API_KEY=sk-...\n# or\nexport GOOGLE_GENERATIVE_AI_API_KEY=...\n\n# Run the test\nnpm run test:agent-tool\n```\n\nThis will verify that the agent tool is properly configured and can execute natural language instructions. See the [Agent Tool Documentation](./docs/agent-tool.md) for more details.\n\n\n## Usage\n\n### As MCP Server\n\nThe server supports two transport modes:\n\n#### Stdio Mode (Default)\n\nStdio mode is the standard way to run MCP servers, communicating over standard input/output. This is the mode used by most MCP clients.\n\nAdd to your MCP client configuration:\n\n```json\n{\n  \"mcpServers\": {\n    \"sonos\": {\n      \"command\": \"node\",\n      \"args\": [\"path/to/sonos-ts-mcp/dist/index.js\"]\n    }\n  }\n}\n```\n\nOr run directly:\n\n```bash\nnode dist/index.js\n```\n\nYou can also use the convenience script:\n\n```bash\nnpm run start:stdio\n# or\ntsx scripts/start-mcp-stdio.ts\n```\n\n#### CLI Agent\n\nThe project includes a CLI agent powered by Mastra that allows you to control your Sonos system using natural language.\n\n```bash\n# Run with default model (gpt-4o-mini)\nnpx sonos-agent-cli \"Play jazz in the living room\"\n\n# Run with a specific model\nnpx sonos-agent-cli \"Play jazz in the living room\" --model gpt-4o\n\n# Run with Gemini 3\nnpx sonos-agent-cli \"Play jazz in the living room\" --model gemini-3-pro-preview\n```\n\n**Environment Variables:**\n\n- `OPENAI_API_KEY`: Required for OpenAI models (default)\n- `GOOGLE_GENERATIVE_AI_API_KEY`: Required for Gemini models\n- `SONOS_AGENT_MODEL`: Set the default model (optional, e.g., `gemini-3-pro-preview`)\n\n**Note on Telemetry**: The Mastra framework's built-in telemetry has been disabled in this implementation. Telemetry warnings are suppressed by setting `globalThis.___MASTRA_TELEMETRY___ = true` before Mastra initialization. This is set automatically in the CLI agent.\n\n#### SSE Mode (HTTP Server)\n\nSSE (Server-Sent Events) mode runs the MCP server as an HTTP server, useful for web-based clients or remote access.\n\nSet the `MCP_TRANSPORT` environment variable to `sse`:\n\n```bash\nMCP_TRANSPORT=sse node dist/index.js\n```\n\nOr with custom port (default is 3000):\n\n```bash\nMCP_TRANSPORT=sse MCP_PORT=8080 node dist/index.js\n```\n\nYou can also use the convenience script:\n\n```bash\nnpm run start:sse\n# or\ntsx scripts/start-mcp-sse.ts\n```\n\nWith custom port:\n\n```bash\nMCP_PORT=8080 npm run start:sse\n```\n\nThe server will start an HTTP endpoint at `http://localhost:3000/sse` (or your configured port) that clients can connect to.\n\n### Development\n\n```bash\nnpm run dev            # Run with tsx (hot reload)\nnpm run build          # Compile TypeScript\nnpm run typecheck      # Type checking only\nnpm run lint           # ESLint\nnpm run format         # Prettier\nnpm test               # Run tests\nnpm run test:discovery # Test Sonos device discovery\nnpm run test:phase1    # Test Phase 1 APIs (Queue, Playback)\nnpm run test:phase2    # Test Phase 2 APIs (Groups, Library)\nnpm run test:phase3    # Test Phase 3 APIs (Audio, Alarms)\nnpm run test:phase4    # Test Phase 4 APIs (Events)\nnpm run test:all-phases # Run all phase tests\n```\n\n### Testing\n\nComprehensive API test scripts are available for all implemented features:\n\n```bash\n# Run all tests\nnpm run test:all-phases\n\n# Or run individual phase tests\nnpm run test:phase1  # Queue, DIDL, Playback Properties\nnpm run test:phase2  # Groups & Music Library Browsing\nnpm run test:phase3  # Audio, Alarms, Snapshots\nnpm run test:phase4  # Event Subscriptions\n\n# Run Phase 2 tests in mock mode (no physical devices required)\nnpm run test:phase2 -- --mock\n\n# Run integration tests (uses AI validation)\nnpm test\n```\n\n**Note**: Phase 2 tests support a mock mode for testing without physical Sonos devices. Use `--mock` flag or set `MOCK_DEVICES=true` environment variable.\n\n**AI-Powered Integration Tests**: The integration test suite uses Gemini 2.5 Flash AI to intelligently validate agent outputs instead of brittle string matching. This provides semantic understanding of test results and adapts to different output formats. Requires `GOOGLE_GENERATIVE_AI_API_KEY` environment variable.\n\nSee the [API Testing Guide](./docs/api-testing-guide.md) and [AI-Powered Testing Guide](./docs/ai-powered-testing.md) for detailed documentation on the test suite.\n\n## Architecture\n\n```\nsrc/\n‚îú‚îÄ‚îÄ discovery/         # SSDP device discovery\n‚îÇ   ‚îú‚îÄ‚îÄ ssdp-client.ts\n‚îÇ   ‚îî‚îÄ‚îÄ device-registry.ts\n‚îú‚îÄ‚îÄ didl/             # DIDL-Lite metadata handling\n‚îÇ   ‚îú‚îÄ‚îÄ didl-object.ts\n‚îÇ   ‚îú‚îÄ‚îÄ didl-resource.ts\n‚îÇ   ‚îú‚îÄ‚îÄ didl-item.ts\n‚îÇ   ‚îú‚îÄ‚îÄ didl-container.ts\n‚îÇ   ‚îú‚îÄ‚îÄ didl-serializer.ts\n‚îÇ   ‚îú‚îÄ‚îÄ didl-parser.ts\n‚îÇ   ‚îî‚îÄ‚îÄ index.ts\n‚îú‚îÄ‚îÄ soap/             # SOAP/UPnP transport layer\n‚îÇ   ‚îú‚îÄ‚îÄ client.ts\n‚îÇ   ‚îú‚îÄ‚îÄ request-builder.ts\n‚îÇ   ‚îî‚îÄ‚îÄ response-parser.ts\n‚îú‚îÄ‚îÄ services/         # Sonos service wrappers\n‚îÇ   ‚îú‚îÄ‚îÄ base-service.ts\n‚îÇ   ‚îú‚îÄ‚îÄ av-transport.ts        # Playback, queue, sleep timer\n‚îÇ   ‚îú‚îÄ‚îÄ rendering-control.ts   # Volume, EQ, audio enhancements\n‚îÇ   ‚îú‚îÄ‚îÄ zone-topology.ts       # Groups, party mode\n‚îÇ   ‚îú‚îÄ‚îÄ content-directory.ts   # Music library browsing\n‚îÇ   ‚îú‚îÄ‚îÄ alarm-clock.ts         # ‚ú® NEW: Alarm management\n‚îÇ   ‚îî‚îÄ‚îÄ snapshot.ts            # ‚ú® NEW: State snapshot/restore\n‚îú‚îÄ‚îÄ mcp/             # MCP server implementation\n‚îÇ   ‚îî‚îÄ‚îÄ server.ts\n‚îî‚îÄ‚îÄ types/           # TypeScript definitions\n    ‚îú‚îÄ‚îÄ sonos.ts\n    ‚îî‚îÄ‚îÄ queue.ts\n```\n\n## Protocol Details\n\n### Discovery (SSDP)\n- Sends UDP multicast to `239.255.255.250:1900`\n- Searches for `urn:schemas-upnp-org:device:ZonePlayer:1`\n- Parses response headers to extract device location\n\n**Note on Discovery**: SSDP multicast discovery may not work in all network environments due to:\n- Windows Firewall blocking UDP port 1900\n- Network switches not properly forwarding multicast traffic\n- VPN interference with multicast routing\n- Corporate network policies\n\nIf automatic discovery fails, use the `sonos_add_device` tool to manually register devices by IP address. The server will verify connectivity before registering the device.\n\n### Manual Device Registration\n\nWhen SSDP discovery doesn't work, you can manually add devices:\n\n```typescript\n// Using the MCP tool\nsonos_add_device({\n  ip: \"192.168.1.100\",\n  port: 1400,  // optional, defaults to 1400\n  name: \"Kitchen\"  // optional, defaults to \"Sonos at {ip}\"\n})\n```\n\nThe server will test connectivity to the device before adding it to the registry.\n\n### Control (SOAP/UPnP)\n- HTTP POST to `http://{ip}:1400/...`\n- XML-based SOAP envelopes\n- Supports all standard Sonos UPnP services\n\n## Documentation\n\n- ü§ñ **[Agent Tool Guide](./docs/agent-tool.md)** - AI-powered natural language control ‚ú® NEW\n- üìö **[Comprehensive Tool Descriptions](./docs/TOOL_DESCRIPTIONS.md)** - Detailed guide for coding agents with use cases, workflows, and best practices for all 50+ tools\n- üì¶ [Installation Guide](./docs/installation-guide.md) - Detailed installation and configuration instructions\n- üíæ [Topology Persistence Guide](./docs/topology-persistence.md) - Device topology storage and management ‚ú® NEW\n- üéØ [Device Resolution Guide](./docs/device-resolution.md) - Using friendly device names ‚ú® NEW\n- üß™ [API Testing Guide](./docs/api-testing-guide.md) - Comprehensive test suite documentation\n- üìò [Implementation Guide](./docs/implementation-guide.md) - Tool usage and examples\n- üèóÔ∏è [Technical Architecture](./docs/technical-architecture.md) - System design details\n- üìö [Phase Completion Docs](./docs/) - PHASE-1-COMPLETE.md through PHASE-4-COMPLETE.md\n\n## Contributing\n\nContributions are welcome! This project is expanding to provide comprehensive Sonos control. See the [roadmap](./docs/implementation-roadmap.md) for planned features.\n\nAreas where contributions are especially valuable:\n- Implementing additional UPnP services\n- Adding DIDL-Lite object model\n- Event subscription system\n- Test coverage expansion\n- Documentation improvements\n\n## License\n\nMIT\n","readmeFilename":"README.md"}